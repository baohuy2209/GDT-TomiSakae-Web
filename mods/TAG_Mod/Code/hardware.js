$(function(){var t=function(){for(var e=[],o=1;o<5&&(GameManager.company.flags["console"+o+"Used"]||6!==(e=4===o?e.concat(["CustomPlatform"+o+"V1.png","CustomPlatform"+o+"V2.png"]):e.concat(["CustomPlatform"+o+"V1.png","CustomPlatform"+o+"V2.png","CustomPlatform"+o+"V3.png"])).length);o++);if(0!==e.length)return e;for(o=1;o<5;o++)GameManager.company.flags["console"+o+"Used"]=void 0;return t()};tagMod.patch(UI,"showDevelopConsoleMenu",function(){for(var e=t(),o=0;o<e.length;o++)e[o]={name:"Variation {0}".localize().format(o+1),img:e[o]};function n(){var e=$("#createConsoleMenu .windowCostLabel"),o=e.text().trim().substr("Cost: {0}".localize().format("").length);e.html("Cost: {0}".localize().format('<span class="tm-cr">'+o+"</span>"))}tagMod.setupSingleContainerListDisplay($("#createConsoleMenu .consoleSliderContainer"),e,function(e){var o=$('<div class="tm-console-variant-content rsActiveSlide"><img class="tm-console-img" /></div>');return o.find(".tm-console-img").attr("src","images/platforms/superb/"+e.img),o}),$("#createConsoleMenu .dialogNextButton")[0].addEventListener("click",function(){setTimeout(function(){tagMod.convertSelectList($("#createConsoleMenu .dialogScreen2 .featureSelectionContainer"))},0)},!0),$("#createConsoleMenu").on("click",n),$("#createConsoleMenu .budgetSlider").on("slide",function(){setTimeout(n,0)}),n()}),tagMod.patch(GameManager,"finishCustomConsole",function(e){if("custom console"===e.id){var o=GDT.getDataStore("TAGMod").data,n=GameManager.company.licencedPlatforms[GameManager.company.licencedPlatforms.length-1],t=e.features,a=t.map(function(o){return General.getAvailableFeaturesForConsole().find(function(e){return e.id==o})});null==o.consoles&&(o.consoles={}),o.consoles[n.id]={features:t,featureCost:a.sum(function(e){return 100*Research.getEngineCost(e)})}}})});