$(function(){function n(i){var n=$(".sidebarNotificationItem[gdt-notification-id='"+i.id+"']");n.find("img").wrap('<div class="tm-notification-icon"></div>');var t=n.find(".tm-notification-icon"),o=t.find("img"),a=-1!=o.attr("src").indexOf("Img/topics-sq/"),e=-1!=o.attr("src").indexOf("/images/platforms/");if(a)t.addClass("tm-notification-icon-fullbleed");else if(e)t.addClass("tm-notification-icon-platform");else{var c=o.attr("src"),s=null;switch(c=c.substr(c.lastIndexOf("/")+1)){case"icon_notification_game_report.svg":case"icon_notification_research.svg":case"icon_notification_training.svg":s="research";break;case"icon_notification_award.svg":s="achievements";break;case"icon_notification_bancruptcy.svg":case"icon_notification_illegal.svg":case"icon_notification_new_money_penalty.svg":s="bad";break;case"icon_notification_new_money.svg":case"icon_notification_new_office.svg":case"icon_notification_unlock.svg":s="good";break;case"icon_notification_convention.svg":case"icon_notification_platform_release.svg":case"icon_notification_reviews.svg":s="events";break;case"icon_notification_thank_you.svg":s="ghg"}null!=s&&t.addClass("tm-notification-icon-"+s)}}Notification.prototype.getNotificationPreviewImage=function(){function i(i){var n=/\/notificationIcons\/([^\.\/]+)\.png$/i.exec(i);return null!=n?MOD_DIR+"Img/notification-icons/"+n[1]+".svg":i}if(this.previewImage){if(0!=this.previewImage.indexOf("./images/topic icons/icon_topic_"))return i(this.previewImage);var n=this.previewImage.substr("./images/topic icons/icon_topic_".length);return MOD_DIR+"Img/topics-sq/"+n.replace(".png","-sq.png")}if(this.image)return i(this.image);if(this.header=="News".localize()||this.header=="Local News".localize())return i("./images/notificationIcons/icon_notification_local_news_and_media.png");switch(this.getInferredType()){case NotificationType.Events:return i("./images/notificationIcons/icon_notification_gamers_enquiry.png");case NotificationType.NewResearchAvailable:return i("./images/notificationIcons/icon_notification_research.png");case NotificationType.IndustryNews:return i("./images/notificationIcons/icon_notification_industry_news.png");case NotificationType.PlatformNews:return i("./images/notificationIcons/icon_notification_platform_release.png");case NotificationType.GameReports:return i("./images/notificationIcons/icon_notification_game_report.png");case NotificationType.CompanyMilestones:return i("./images/notificationIcons/icon_notification_award.png");default:return i("./images/notificationIcons/icon_notification_info.png")}},UI._resetCallbacks.remove(UI._resetSidebarNotificationUI),tagMod.patch(UI,"_addSidebarNotification",function(i){n(i)}),tagMod.patch(UI,"_resetSidebarNotificationUI",function(){for(var i=0;i<GameManager.company.sidebarNotifications.length;i++){n(GameManager.company.sidebarNotifications[i])}}),UI._resetCallbacks.push(UI._resetSidebarNotificationUI),tagMod.patch(UI,"showPostMortemComplete",function(i){var n=i.text,t=GameManager.company.notifications[GameManager.company.notifications.length-1],o=GameManager.company.gameLog.find(function(i){return i.id==n});null!=o&&t&&(o.flags.tmPostMortem=t.text)})});